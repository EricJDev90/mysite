import{Ra as n,Sa as i,Ta as c,Ya as m,gb as o,ya as l}from"./chunk-PXDDC3VC.js";import{a as d}from"./chunk-6OBAXG52.js";var g=(()=>{let r=class r{constructor(){this.lastRenderTime=0,this.inputDirection={x:0,y:0},this.lastInputDirection={x:0,y:0},this.food={x:10,y:5},this.newSegments=0,this.score=0,this.gamestarted=!1,this.gameOver=!1,this.SNAKE_SPEED=6,this.EXPANSION_RATE=1,this.GRID_SIZE=21,this.snakeBody=[{x:11,y:11}],this.gameBoard=null,this.scoreBoard=null,this.startbutton=null,this.splashScreen=null}ngOnInit(){this.splashScreen=document.getElementById("splashscreen"),this.gameBoard=document.getElementById("game-board"),this.scoreBoard=document.getElementById("score-board"),this.startbutton=document.getElementById("startbutton"),window.requestAnimationFrame(this.main),window.addEventListener("keydown",t=>{t.key=="Enter"&&this.startFunction()})}startFunction(){this.gamestarted||(this.splashScreen&&(this.splashScreen.style.display="none"),this.gameBoard&&(this.gameBoard.style.display="grid"),this.enableControls(),this.gamestarted=!0,this.main())}enableControls(){window.addEventListener("keydown",t=>{switch(this.lastInputDirection=this.inputDirection,t.key){case"ArrowUp":if(console.log("Arrow up"),this.lastInputDirection.y!==0)break;this.inputDirection={x:0,y:-1};break;case"ArrowDown":if(this.lastInputDirection.y!==0)break;this.inputDirection={x:0,y:1};break;case"ArrowLeft":if(this.lastInputDirection.x!==0)break;this.inputDirection={x:-1,y:0};break;case"ArrowRight":if(this.lastInputDirection.x!==0)break;this.inputDirection={x:1,y:0};break}})}main(t){window.requestAnimationFrame(this.main.bind(this)),!((t-this.lastRenderTime)/1e3<1/this.SNAKE_SPEED)&&(console.log("Render"),this.lastRenderTime=t,this.update(),this.draw())}drawSnake(t){this.snakeBody.forEach(e=>{let s=document.createElement("div");s.style.gridRowStart=e.y.toString(),s.style.gridColumnStart=e.x.toString(),s.style.backgroundColor="black",t.appendChild(s)})}draw(){this.gameBoard.innerHTML="",this.drawSnake(this.gameBoard),this.drawFood(this.gameBoard)}update(){for(let t=this.snakeBody.length-2;t>=0;t--)this.snakeBody[t+1]=d({},this.snakeBody[t]);this.snakeBody[0].x+=this.inputDirection.x,this.snakeBody[0].y+=this.inputDirection.y,this.onSnake(this.food)&&(this.addSegments(this.EXPANSION_RATE),this.food=this.getRandomFoodPosition()),this.checkDeath()}drawFood(t){let e=document.createElement("div");e.style.gridRowStart=this.food.y.toString(),e.style.gridColumnStart=this.food.x.toString(),e.style.backgroundColor="red",t.appendChild(e)}onSnake(t,{ignoreHead:e=!1}={}){return this.snakeBody.some((s,h)=>e&&h===0?!1:this.equalPositions(s,t))}equalPositions(t,e){return t.x===e.x&&t.y===e.y}addSegments(t){this.newSegments+=t,this.updateScore();for(let e=0;e<this.newSegments;e++)this.snakeBody.push(d({},this.snakeBody[this.snakeBody.length]));this.newSegments=0}getRandomFoodPosition(){let t;for(;t==null||this.onSnake(t);)t=this.randomGridPosition();return t}randomGridPosition(){return{x:Math.floor(Math.random()*this.GRID_SIZE)+1,y:Math.floor(Math.random()*this.GRID_SIZE)+1}}checkDeath(){this.gameOver=this.outsideGrid(this.snakeBody[0])||this.snakeIntersection(),this.gameOver&&window.location.reload()}outsideGrid(t){return t.x<1||t.x>this.GRID_SIZE||t.y<1||t.y>this.GRID_SIZE}snakeIntersection(){return this.onSnake(this.snakeBody[0],{ignoreHead:!0})}updateScore(){this.scoreBoard.innerHTML=(this.score+=10).toString()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=l({type:r,selectors:[["snake"]],decls:21,vars:0,consts:[["id","score-board"],["id","game-board"],["id","splashscreen"],["id","splashscreen-content"],["id","startbutton","type","button","value","Start(Enter)",3,"click"],["id","controls-style"]],template:function(e,s){e&1&&(n(0,"body")(1,"h1"),o(2,"Snake in JS"),i(),n(3,"h2"),o(4,"Score:"),i(),n(5,"h2",0),o(6,"0"),i(),n(7,"main"),c(8,"div",1),n(9,"div",2)(10,"div",3)(11,"h2"),o(12,"Snake in JS!"),i(),n(13,"input",4),m("click",function(){return s.startFunction()}),i(),n(14,"div",5)(15,"p"),o(16,"Controls:"),i(),n(17,"p"),o(18,"Move snake: arrow keys"),i(),n(19,"p"),o(20,"(Currently only works on a desktop computer, no mobile yet!)"),i()()()()()())},styles:["h1[_ngcontent-%COMP%]{text-align:center;display:block}h2[_ngcontent-%COMP%]{text-align:center;margin:0}main[_ngcontent-%COMP%]{min-height:85vh;width:99vw;display:flex;justify-content:center;align-items:center;margin:0;background-color:#000}#game-board[_ngcontent-%COMP%]{background-color:#ccc;width:80vmin;height:80vmin;display:none;grid-template-rows:repeat(21,1fr);grid-template-columns:repeat(21,1fr)}#splashscreen[_ngcontent-%COMP%]{background-color:#0ff;width:80vw;height:80vh;text-align:center}#splashscreen-content[_ngcontent-%COMP%]{margin-top:35vh}#splashscreen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:25%;width:25%}#controls-style[_ngcontent-%COMP%]{border:white 1px solid;margin-left:auto;margin-right:auto;margin-top:3vh;width:25%}"]});let a=r;return a})();export{g as SnakePage};
